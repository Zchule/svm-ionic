{"version":3,"sources":["../../src/pages/supervisor/home/home.module.ts","../../src/pages/supervisor/home/home.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n})\r\nexport class HomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/supervisor/home/home.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, MenuController, AlertController } from 'ionic-angular';\r\n\r\nimport { BackgroundGeolocation } from '@ionic-native/background-geolocation';\r\nimport { LocationService } from './../../../providers/location';\r\n\r\nimport { MapService } from '../../../providers/map.service';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html',\r\n})\r\nexport class HomePage {\r\n\r\n  date = new Date();\r\n  fecha: string = (this.date.getMonth() + 1) + '-' + this.date.getDate() + '-' + this.date.getFullYear();\r\n  myDate: String = new Date().toISOString().substring(0, 10);\r\n  fechaServidor: string;\r\n  subscriptions: Subscription[] = [];\r\n\r\n  constructor(\r\n    private  menuCtrl: MenuController,\r\n    private backgroundGeolocation: BackgroundGeolocation,\r\n    private locationProvider: LocationService,\r\n    private  alertCtrl: AlertController,\r\n    private mapService: MapService\r\n  ) {}\r\n\r\n  ionViewDidLoad() {\r\n    console.log('fecha', this.fecha);\r\n    this.mapService.getFechaServidor()\r\n    .valueChanges()\r\n    .subscribe((data: any) => {\r\n      this.fechaServidor = data.fecha;\r\n      if (this.fechaServidor === this.fecha) {\r\n        console.log('true');\r\n        this.startBackgroundGeolocation();\r\n      } else {\r\n        this.startBackgroundGeolocation();\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.menuCtrl.enable(true, 'menuSuper');\r\n  }\r\n\r\n  ionViewDidLeave() {\r\n    this.subscriptions.forEach((subscription) => {\r\n      subscription.unsubscribe();\r\n    });\r\n  }\r\n\r\n  startBackgroundGeolocation() {\r\n    this.backgroundGeolocation.isLocationEnabled()\r\n    .then((rta) => {\r\n      if (rta) {\r\n        this.locationProvider.start(this.fecha);\r\n      } else {\r\n        const alert = this.alertCtrl.create({\r\n          title: 'Active su GPS',\r\n          subTitle: 'No se encuentra activado',\r\n          buttons: ['OK']\r\n        });\r\n        alert.present();\r\n        this.backgroundGeolocation.showLocationSettings();\r\n      }\r\n    });\r\n  }\r\n\r\n  stopBackgroundGeolocation() {\r\n    this.locationProvider.stop();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/supervisor/home/home.ts"],"sourceRoot":""}