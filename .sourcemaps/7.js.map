{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAUlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACZe;AACqC;AAEF;AAChB;AAEJ;AAQzD;IAME,kBACS,OAAsB,EACtB,QAAwB,EACvB,qBAA4C,EAC5C,gBAAiC,EAClC,SAA0B,EACzB,UAAsB;QALvB,YAAO,GAAP,OAAO,CAAe;QACtB,aAAQ,GAAR,QAAQ,CAAgB;QACvB,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,qBAAgB,GAAhB,gBAAgB,CAAiB;QAClC,cAAS,GAAT,SAAS,CAAiB;QACzB,eAAU,GAAV,UAAU,CAAY;QAVhC,WAAM,GAAW,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAE3D,kBAAa,GAAmB,EAAE,CAAC;IAShC,CAAC;IAEJ,iCAAc,GAAd;QAAA,iBAQC;QAPC,IAAM,yBAAyB,GAAG,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE;aACnE,YAAY,EAAE;aACd,SAAS,CAAC,UAAC,IAAS;YACnB,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAC1B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QACnD,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACpC,CAAC;IAED,kCAAe,GAAf;QACE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;IAC1C,CAAC;IAED,kCAAe,GAAf;QACE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAC,YAAY;YACtC,YAAY,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6CAA0B,GAA1B;QAAA,iBAeC;QAdC,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,EAAE;aAC7C,IAAI,CAAC,UAAC,GAAG;YACR,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACR,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;YAC1C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,IAAM,OAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAClC,KAAK,EAAE,eAAe;oBACtB,QAAQ,EAAE,0BAA0B;oBACpC,OAAO,EAAE,CAAC,IAAI,CAAC;iBAChB,CAAC,CAAC;gBACH,OAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,KAAI,CAAC,qBAAqB,CAAC,oBAAoB,EAAE,CAAC;YACpD,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,4CAAyB,GAAzB;QACE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;IAC/B,CAAC;IAtDU,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;kFAQ+B;YACZ,mGAAc;YACA,6EAAqB;YAC1B,sEAAe;YACvB,4EAAe;YACb,KAAU;OAZrB,QAAQ,CAwDpB;IAAD,CAAC;AAAA;SAxDY,QAAQ,e","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n  ],\r\n})\r\nexport class HomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, MenuController, AlertController } from 'ionic-angular';\r\n\r\nimport { BackgroundGeolocation } from '@ionic-native/background-geolocation';\r\nimport { LocationService } from './../../providers/location';\r\n\r\nimport { MapService } from '../../providers/map.service';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html',\r\n})\r\nexport class HomePage {\r\n\r\n  myDate: String = new Date().toISOString().substring(0, 10);\r\n  fecha: string;\r\n  subscriptions: Subscription[] = [];\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public menuCtrl: MenuController,\r\n    private backgroundGeolocation: BackgroundGeolocation,\r\n    private locationProvider: LocationService,\r\n    public alertCtrl: AlertController,\r\n    private mapService: MapService,\r\n  ) {}\r\n\r\n  ionViewDidLoad() {\r\n    const subscriptionFechaServidor = this.mapService.getFechaServidor()\r\n    .valueChanges()\r\n    .subscribe((data: any) => {\r\n      this.fecha = data.fecha;\r\n    });\r\n    this.subscriptions.push(subscriptionFechaServidor);\r\n    this.startBackgroundGeolocation();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.menuCtrl.enable(true, 'menuSuper');\r\n  }\r\n\r\n  ionViewDidLeave() {\r\n    this.subscriptions.forEach((subscription) => {\r\n      subscription.unsubscribe();\r\n    });\r\n  }\r\n\r\n  startBackgroundGeolocation() {\r\n    this.backgroundGeolocation.isLocationEnabled()\r\n    .then((rta) => {\r\n      if (rta) {\r\n        this.locationProvider.start(this.fecha);\r\n      } else {\r\n        const alert = this.alertCtrl.create({\r\n          title: 'Active su GPS',\r\n          subTitle: 'No se encuentra activado',\r\n          buttons: ['OK']\r\n        });\r\n        alert.present();\r\n        this.backgroundGeolocation.showLocationSettings();\r\n      }\r\n    });\r\n  }\r\n\r\n  stopBackgroundGeolocation() {\r\n    this.locationProvider.stop();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}